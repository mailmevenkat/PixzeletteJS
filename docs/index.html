<!DOCTYPE html>

<html>
<head>
  <title>Pixzelette JS - Documentation</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
        <link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
  <link rel="stylesheet" media="all" href="default.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To â€¦</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
              <a class="source" href="#">[Root]</a>
              <a class="source" href="#constructor">Constructor</a>
              <a class="source" href="#effect">Effect</a>
              <a class="source" href="#blend">Blend</a>
              <a class="source" href="#filter">Filter</a>
              <a class="source" href="#custom">Custom</a>
              <a class="source" href="#getCanvas">Get Canvas</a>
              <a class="source" href="#getImage">Get Image</a>
              <a class="source" href="#getDataURL">Get Data URL</a>
              <a class="source" href="#RGBtoHSV">RGB to HSV</a>
              <a class="source" href="#HSVtoRGB">HSV to RGB</a>
              <a class="source" href="#gradient">Gradient</a>
              <a class="source" href="#blend_fix">Blend fix</a>
          </div>
        </div>
        </li>
      </ul>
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1 style="font-family: 'Open Sans'; text-transform: none;"><a href="../examples/" style="color:#fff; text-decoration:none;">Pixzelette JS</a></h1>
              A Lightweight native JavaScript library for image manipulation on/using canvas.
                <h2>About Library</h2>
                <p><b>Creator:</b> Venkateswaran Selvan</p>
                <p><b>Version:</b> 0.0.2</p>
                <p><b>Changelog:</b> Added callback support</p>
                <p><b>Language:</b> JavaScript</p>
                <p><b>Requirement:</b> Browser with canvas support</p>
              </div>
          </li>
        
        <li id="constructor">
            <div class="annotation">
              <div class="pilwrap ">
                <a class="pilcrow" href="#constructor">&#182;</a>
              </div>
                <b>Constructor(element, args, callback)</b> 
                <ul>
                    <li>element = image or canvas</li>
                    <li>args = {w: width, h: height, x: x-axis, y: y-axis}</li> 
                </ul>
            </div>
            <div class="content">
                <div class='highlight'>
                    <pre>
        <span class="hljs-keyword">this</span>.Pixzelette = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(element,args,callback)</span></span>{
            
            <span class="hljs-comment">/*
                Initializing canvas, context and pixels
            */</span>
            <span class="hljs-keyword">this</span>.canvas = <span class="hljs-literal">null</span>; 
            <span class="hljs-keyword">this</span>.context = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">this</span>.pixels = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">this</span>.image = <span class="hljs-keyword">new</span> Image();
            <span class="hljs-keyword">this</span>.args = {
                w: element.naturalWidth,
                h: element.naturalHeight,
                x: <span class="hljs-number">0</span>,
                y: <span class="hljs-number">0</span>
            };
            
            <span class="hljs-comment">/*
                Check whether the given element is image or canvas
            */</span>
            
            <span class="hljs-keyword">var</span> isImage = element.nodeName.toLowerCase() === <span class="hljs-string">'img'</span>;
            <span class="hljs-keyword">var</span> isCanvas = element.nodeName.toLowerCase() === <span class="hljs-string">'canvas'</span>; 
            
            <span class="hljs-comment">/*
                If the given element is image, 
                 i. Create a canvas and assign it to variable 'canvas'
                 ii. Draw the image on the new canvas using context.
            */</span>
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> args !== <span class="hljs-string">'undefined'</span>)
            {
                <span class="hljs-keyword">this</span>.args.w = <span class="hljs-keyword">typeof</span> args.w !== <span class="hljs-string">'undefined'</span>? args.w : <span class="hljs-keyword">this</span>.args.w;
                <span class="hljs-keyword">this</span>.args.h = <span class="hljs-keyword">typeof</span> args.h !== <span class="hljs-string">'undefined'</span>? args.h : <span class="hljs-keyword">this</span>.args.h;
                <span class="hljs-keyword">this</span>.args.x = <span class="hljs-keyword">typeof</span> args.x !== <span class="hljs-string">'undefined'</span>? args.x : <span class="hljs-keyword">this</span>.args.x;
                <span class="hljs-keyword">this</span>.args.y = <span class="hljs-keyword">typeof</span> args.y !== <span class="hljs-string">'undefined'</span>? args.y : <span class="hljs-keyword">this</span>.args.y;
            }
            <span class="hljs-keyword">if</span>(isImage){
                <span class="hljs-keyword">this</span>.canvas = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'canvas'</span>);
                <span class="hljs-keyword">this</span>.canvas.width = <span class="hljs-keyword">this</span>.args.w;
                <span class="hljs-keyword">this</span>.canvas.height = <span class="hljs-keyword">this</span>.args.h;
                <span class="hljs-keyword">this</span>.context = <span class="hljs-keyword">this</span>.canvas.getContext(<span class="hljs-string">'2d'</span>);
                <span class="hljs-keyword">this</span>.context.drawImage(element,<span class="hljs-keyword">this</span>.args.x,<span class="hljs-keyword">this</span>.args.y);
            } 
            
            <span class="hljs-comment">/*
              If the given element is canvas
                i. Assign the given element to the variable 'canvas'
            */</span>
            
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(isCanvas){
                <span class="hljs-keyword">this</span>.canvas = element;
                <span class="hljs-keyword">this</span>.context = <span class="hljs-keyword">this</span>.canvas.getContext(<span class="hljs-string">'2d'</span>);
            }
            
            <span class="hljs-comment">/*
              If the given element is not a valid image or canvas, return null
            */</span>
            <span class="hljs-keyword">else</span>{
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            
            <span class="hljs-keyword">this</span>.pixels = <span class="hljs-keyword">this</span>.getImageData(); <span class="hljs-comment">//get the image data and assign it to pixels</span>
            <span class="hljs-keyword">this</span>.image.width = <span class="hljs-keyword">this</span>.canvas.width;
            <span class="hljs-keyword">this</span>.image.height = <span class="hljs-keyword">this</span>.canvas.height; 
             <span class="hljs-keyword">if(<span class="hljs-keyword">typeof</span> callback ) <span class="hljs-string">callback(<span class="hljs-keyword">this</span>)</span>; <span class="hljs-comment">//callback</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; <span class="hljs-comment">//return the object back</span>
        }
                    </pre>
                </div>
            </div>
        </li>
        <li id="effect">
            <div class="annotation">
              <div class="pilwrap ">
                <a class="pilcrow" href="#effect">&#182;</a>
              </div>
                <b> function effect (effects, callback)</b> 
                <ul>
                    <li>effects = Javascript Object</li>
                    <li><b>Available effects</b></li>
                    <ul>
                        <li>brightness</li>
                        <li>contrast</li>
                        <li>sepia</li>
                        <li>hue</li>
                        <li>saturate</li>
                        <li>value</li>
                        <li>red</li>
                        <li>green</li>
                        <li>blue</li>
                        <li>alpha</li>
                        <li>desaturate</li>
                    </ul>
                </ul>
            </div>
            <div class="content">
                <div class='highlight'>
                    <pre>
        Pixzelette.prototype.effect = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(effects, callback)</span></span>{
            
            <span class="hljs-keyword">var</span> color; <span class="hljs-comment">//declares a variable color</span>
            
            <span class="hljs-keyword">if</span>(effects == <span class="hljs-literal">null</span>){ <span class="hljs-comment">//if no effects is provided, return object</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.brightness) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> brightness = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">Math</span>.min(effects.brightness * <span class="hljs-number">255</span>,<span class="hljs-number">255</span>),-<span class="hljs-number">255</span>);
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.contrast) !== <span class="hljs-string">'undefined'</span>){ 
                effects.contrast = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">Math</span>.min(effects.contrast * <span class="hljs-number">128</span>,<span class="hljs-number">128</span>),-<span class="hljs-number">128</span>);
                <span class="hljs-keyword">var</span> cFactor = (<span class="hljs-number">259</span> * (effects.contrast + <span class="hljs-number">255</span>)) / (<span class="hljs-number">255</span> * (<span class="hljs-number">259</span> - effects.contrast)); <span class="hljs-comment">//calculates the contrast factor and assign it to cFactor</span>
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.sepia) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> sepia = effects.sepia; <span class="hljs-comment">//assign effects.sepia to sepia</span>
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.hue) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> hue = effects.hue; <span class="hljs-comment">//assign effects.hue to hue</span>
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.saturate) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> saturate = effects.saturate; <span class="hljs-comment">//assign effects.saturate to saturate</span>
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.value) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> value = effects.value; <span class="hljs-comment">//assign effects.value to value</span>
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.red) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> red = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">Math</span>.min(effects.red * <span class="hljs-number">255</span>,<span class="hljs-number">255</span>),-<span class="hljs-number">255</span>);
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.green) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> green = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">Math</span>.min(effects.green * <span class="hljs-number">255</span>,<span class="hljs-number">255</span>),-<span class="hljs-number">255</span>);
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.blue) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> blue = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">Math</span>.min(effects.blue * <span class="hljs-number">255</span>,<span class="hljs-number">255</span>),-<span class="hljs-number">255</span>);
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.alpha) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> alpha = effects.alpha; <span class="hljs-comment">//assign effects.alpha to alpha</span>
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(effects.desaturate) !== <span class="hljs-string">'undefined'</span>){
                <span class="hljs-keyword">var</span> desaturate = effects.desaturate; <span class="hljs-comment">//assign effects.alpha to alpha</span>
            }
            
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-keyword">this</span>.pixels.data.length; i+=<span class="hljs-number">4</span>) { <span class="hljs-comment">//Loops through each pixel of the image</span>
                
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> effects) { <span class="hljs-comment">//Makes sure the effects are executed in the order it is provided</span>
                    
                    <span class="hljs-comment">/*
                        red -&gt; pixels.data[i]
                        green -&gt; pixels.data[i+1]
                        blue -&gt; pixels.data[i+2]
                        alpha -&gt; pixels.data[i+3]
                    */</span>
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"brightness"</span>){ <span class="hljs-comment">//for brightness</span>
                         <span class="hljs-keyword">this</span>.pixels.data[i] += brightness;
                         <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] += brightness;
                         <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] += brightness;
                    }
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"contrast"</span>){ <span class="hljs-comment">//for contrast</span>
                        <span class="hljs-keyword">this</span>.pixels.data[i] = cFactor * (<span class="hljs-keyword">this</span>.pixels.data[i] - <span class="hljs-number">128</span>) + <span class="hljs-number">128</span>;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] = cFactor * (<span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] - <span class="hljs-number">128</span>) + <span class="hljs-number">128</span>;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] = cFactor * (<span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] - <span class="hljs-number">128</span>) + <span class="hljs-number">128</span>;   
                    }
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"sepia"</span>){ <span class="hljs-comment">//for sepia</span>
                        <span class="hljs-keyword">this</span>.pixels.data[i] = (<span class="hljs-keyword">this</span>.pixels.data[i] * <span class="hljs-number">0.393</span> + <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] * <span class="hljs-number">0.769</span> + <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] * <span class="hljs-number">0.189</span>) * sepia;
                <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] = (<span class="hljs-keyword">this</span>.pixels.data[i] * <span class="hljs-number">0.349</span> + <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] * <span class="hljs-number">0.686</span> + <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] * <span class="hljs-number">0.168</span>) * sepia;
                <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] = (<span class="hljs-keyword">this</span>.pixels.data[i] * <span class="hljs-number">0.272</span> + <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] * <span class="hljs-number">0.534</span> + <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] * <span class="hljs-number">0.131</span>) * sepia;
                    }
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"hue"</span>){ <span class="hljs-comment">//for hue</span>
                        color = RGBtoHSV(<span class="hljs-keyword">this</span>.pixels.data[i],<span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>],<span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>]);
                        color.hue *= hue;
                        color = HSVtoRGB(color.hue,color.saturation,color.value);
                        <span class="hljs-keyword">this</span>.pixels.data[i] = color.red;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] = color.green;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] = color.blue;
                    }
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"saturate"</span>){ <span class="hljs-comment">//for saturate</span>
                        color = RGBtoHSV(<span class="hljs-keyword">this</span>.pixels.data[i],<span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>],<span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>]);
                        color.saturation *= saturate;
                        color = HSVtoRGB(color.hue,color.saturation,color.value);
                        <span class="hljs-keyword">this</span>.pixels.data[i] = color.red;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] = color.green;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] = color.blue;
                    } 
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"value"</span>){ <span class="hljs-comment">//for value</span>
                        color = RGBtoHSV(<span class="hljs-keyword">this</span>.pixels.data[i],<span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>],<span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>]);
                        color.value *= value;
                        color = HSVtoRGB(color.hue,color.saturation,color.value);
                        <span class="hljs-keyword">this</span>.pixels.data[i] = color.red;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] = color.green;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] = color.blue;
                    } 
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"red"</span>){ <span class="hljs-comment">//for red</span>
                        <span class="hljs-keyword">this</span>.pixels.data[i] += red;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] -= red;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] -= red;
                    }
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"green"</span>){ <span class="hljs-comment">//for green</span>
                        <span class="hljs-keyword">this</span>.pixels.data[i] -= green;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] += green;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] -= green;
                    }
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"blue"</span>){ <span class="hljs-comment">//for blue</span>
                        <span class="hljs-keyword">this</span>.pixels.data[i] -= blue;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] -= blue;
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] += blue;
                    }
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"alpha"</span>){ <span class="hljs-comment">//for alpha</span>
                        <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">3</span>] *= alpha;
                    }
                    
                    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">"desaturate"</span>){
                        <span class="hljs-keyword">var</span> g = (<span class="hljs-number">0.3</span> * <span class="hljs-keyword">this</span>.pixels.data[i]) + (<span class="hljs-number">0.59</span> * <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>]) + (<span class="hljs-number">0.11</span> * <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>]); 
                        <span class="hljs-keyword">this</span>.pixels.data[i] = <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">1</span>] = <span class="hljs-keyword">this</span>.pixels.data[i+<span class="hljs-number">2</span>] = g * desaturate;
                    }
                }
            }
            
            <span class="hljs-keyword">this</span>.context.putImageData(<span class="hljs-keyword">this</span>.pixels,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>); <span class="hljs-comment">//updates new pixel to context</span>
            
            <span class="hljs-keyword">if(<span class="hljs-keyword">typeof</span> callback ) <span class="hljs-string">callback(<span class="hljs-keyword">this</span>)</span>; <span class="hljs-comment">//callback</span>
            
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        };
                    </pre>
                </div>
            </div>
        </li>
        <li id="blend">
            <div class="annotation">
              <div class="pilwrap ">
                <a class="pilcrow" href="#blend">&#182;</a>
              </div>
                <b> function blend(element, mode, opacity, callback)</b> 
                <ul>
                    <li>element = image or canvas</li>
                    <li>mode = string</li>
                    <li>opacity = float</li>
                    <li><b>Available modes</b></li>
                    <ul>
                        <li>addition</li>
                        <li>subract</li>
                        <li>multiply</li>
                        <li>divide</li>
                        <li>overlay</li>
                        <li>screen</li>
                        <li>darken</li>
                        <li>lighten</li>
                        <li>dodge</li>
                        <li>burn</li>
                        <li>soft light</li>
                        <li>hard light</li>
                        <li>difference</li>
                        <li>exclusion</li>
                        <li>hue</li>
                        <li>saturation</li>
                        <li>color</li>
                        <li>luminosity</li>
                </ul>
            </ul>
            </div>
            <div class="content">
                <div class='highlight'>
                    <pre>
        Pixzelette.prototype.blend = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(element, mode, opacity, callback)</span></span>{
            
            <span class="hljs-keyword">var</span> isImage = element.nodeName.toLowerCase() === <span class="hljs-string">'img'</span>;
            <span class="hljs-keyword">var</span> isCanvas = element.nodeName.toLowerCase() === <span class="hljs-string">'canvas'</span>;
            
            <span class="hljs-keyword">if</span>(!isImage &amp;&amp; !isCanvas) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
                        
            <span class="hljs-keyword">switch</span>(mode){
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"addition"</span>: blend_fix(element, <span class="hljs-keyword">this</span>, <span class="hljs-string">"addition"</span>, opacity); <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"subtract"</span>: blend_fix(element, <span class="hljs-keyword">this</span>, <span class="hljs-string">"subtract"</span>, opacity); <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"multiply"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"multiply"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"divide"</span>: blend_fix(element, <span class="hljs-keyword">this</span>, <span class="hljs-string">"divide"</span>, opacity); <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"overlay"</span>: <span class="hljs-keyword">this</span>.context.g
                        "antiq", "aqua", "beat", "cassie", "deveil",
                           "ember", "evening", "hello", "may", "natalie",
                           "nilam", "retro", "saturn", "shallow", "sketchy",
                           "tamil", "valet", "zephyr"lobalCompositeOperation = <span class="hljs-string">"overlay"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"screen"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"screen"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"darken"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"darken"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"lighten"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"lighten"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"dodge"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"color-dodge"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"burn"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"color-burn"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"soft light"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"soft-light"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"hard light"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"hard-light"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"difference"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"difference"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"exclusion"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"exclusion"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"hue"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"hue"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"saturation"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"saturation"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"color"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"color"</span>; <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"luminosity"</span>: <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"luminosity"</span>; <span class="hljs-keyword">break</span>;
            }
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> opacity !== <span class="hljs-string">'undefined'</span>)
                <span class="hljs-keyword">this</span>.context.globalAlpha = opacity;
            
            <span class="hljs-keyword">if</span>(isCanvas)
                element = element.toDataURL();
            
            <span class="hljs-keyword">this</span>.context.drawImage(element, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
            
            <span class="hljs-keyword">this</span>.pixels = <span class="hljs-keyword">this</span>.getImageData(); <span class="hljs-comment">//fetches the new pixels from context</span>
            
            <span class="hljs-keyword">this</span>.context.globalCompositeOperation = <span class="hljs-string">"source-over"</span>; <span class="hljs-comment">//resets global composite operation to default</span>
            
            <span class="hljs-keyword">this</span>.context.globalAlpha = <span class="hljs-number">1</span>; <span class="hljs-comment">//resets global alpha to default</span>
            
             <span class="hljs-keyword">if(<span class="hljs-keyword">typeof</span> callback ) <span class="hljs-string">callback(<span class="hljs-keyword">this</span>)</span>; <span class="hljs-comment">//callback</span>
            
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            
        };

                    </pre>
                </div>
            </div>
        </li>
        <li id="filter">
            <div class="annotation">
              <div class="pilwrap ">
                <a class="pilcrow" href="#filter">&#182;</a>
              </div>
                <b> function filter(name, callback) </b> 
                <ul>
                    <li>name = string</li>
                    <li>Available filters</li>
                    <ul>
                        <li>antiq</li>
                        <li>aqua</li>
                        <li>beat</li>
                        <li>cassie</li>
                        <li>deveil</li>
                        <li>ember</li>
                        <li>evening</li>
                        <li>hello</li>
                        <li>may</li>
                        <li>natalie</li>
                        <li>nilam</li>
                        <li>retro</li>
                        <li>saturn</li>
                        <li>shallow</li>
                        <li>sketchy</li>
                        <li>tamil</li>
                        <li>valet</li>
                        <li>zephyr</li>
                    </ul>
                </ul>
            </div>
        <div class="content">
            <div class='highlight'>
                <pre>
        Pixzelette.prototype.filter = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(name)</span></span>{
            
            <span class="hljs-keyword">switch</span>(name){
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"antiq"</span>: <span class="hljs-keyword">this</span>.effect({sepia: <span class="hljs-number">0.7</span>, brightness: <span class="hljs-number">0.2</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"aqua"</span>: <span class="hljs-keyword">this</span>.effect({brightness: <span class="hljs-number">0.1</span>, saturate: <span class="hljs-number">2</span>, blue: <span class="hljs-number">0.08</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"beat"</span>: <span class="hljs-keyword">this</span>.custom(<span class="hljs-string">"vignette"</span>,<span class="hljs-number">0.8</span>).effect({red: <span class="hljs-number">0.05</span>, blue: <span class="hljs-number">0.05</span>}).custom(<span class="hljs-string">"orange"</span>,<span class="hljs-number">0.6</span>); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"cassie"</span>: <span class="hljs-keyword">this</span>.custom(<span class="hljs-string">"vignette"</span>,<span class="hljs-number">0.8</span>).effect({red:<span class="hljs-number">0.05</span>, blue:<span class="hljs-number">0.1</span>}).custom(<span class="hljs-string">"cream"</span>,<span class="hljs-number">0.4</span>); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"deveil"</span>: <span class="hljs-keyword">this</span>.effect({red: <span class="hljs-number">0.05</span>, sepia: <span class="hljs-number">0.35</span>, brightness:<span class="hljs-number">0.37</span>, contrast: <span class="hljs-number">0.8</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"ember"</span>: <span class="hljs-keyword">this</span>.effect({sepia: <span class="hljs-number">0.6</span>, brightness: <span class="hljs-number">0.21</span>, contrast: <span class="hljs-number">0.4</span>, red: <span class="hljs-number">0.2</span>}).effect({brightness: <span class="hljs-number">0.15</span>}).custom(<span class="hljs-string">"vignette"</span>,<span class="hljs-number">0.7</span>); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"evening"</span>: <span class="hljs-keyword">this</span>.effect({contrast: <span class="hljs-number">0.5</span>, red: <span class="hljs-number">0.1</span>, green:<span class="hljs-number">0.1</span>}).custom(<span class="hljs-string">"blue"</span>,<span class="hljs-number">0.4</span>); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"hello"</span>: <span class="hljs-keyword">this</span>.effect({sepia: <span class="hljs-number">1.1</span>, brightness: -<span class="hljs-number">0.1</span>, contrast: <span class="hljs-number">0.1</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"may"</span>: <span class="hljs-keyword">this</span>.effect({contrast: <span class="hljs-number">0.2</span>, red: <span class="hljs-number">0.07</span>, blue:<span class="hljs-number">0.07</span>}).custom(<span class="hljs-string">"cream"</span>,<span class="hljs-number">0.4</span>); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"natalie"</span>: <span class="hljs-keyword">this</span>.effect({saturate: <span class="hljs-number">0.35</span>, contrast: <span class="hljs-number">0.1</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"nilam"</span>: <span class="hljs-keyword">this</span>.effect({contrast: -<span class="hljs-number">0.1</span>, green: <span class="hljs-number">0.05</span>, blue: <span class="hljs-number">0.07</span>, brightness:<span class="hljs-number">0.1</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"retro"</span>: <span class="hljs-keyword">this</span>.effect({red: <span class="hljs-number">0.1</span>, green: <span class="hljs-number">0.07</span>, blue: <span class="hljs-number">0.1</span>, contrast: <span class="hljs-number">0.1</span>, brightness: <span class="hljs-number">0.25</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"saturn"</span>: <span class="hljs-keyword">this</span>.effect({hue: <span class="hljs-number">0.1</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"shallow"</span>: <span class="hljs-keyword">this</span>.effect({saturate: <span class="hljs-number">1.4</span>, contrast: <span class="hljs-number">0.3</span>, desaturate: <span class="hljs-number">1</span>, brightness: <span class="hljs-number">0.2</span>}).custom(<span class="hljs-string">"vignette"</span>,<span class="hljs-number">0.4</span>); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"sketchy"</span>: <span class="hljs-keyword">this</span>.effect({desaturate: <span class="hljs-number">2.5</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"tamil"</span>: <span class="hljs-keyword">this</span>.effect({contrast: -<span class="hljs-number">0.1</span>, brightness: <span class="hljs-number">0.1</span>, saturate: <span class="hljs-number">2</span>, red: <span class="hljs-number">0.08</span>, blue: <span class="hljs-number">0.08</span>}).custom(<span class="hljs-string">"orange"</span>,<span class="hljs-number">0.4</span>); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"valet"</span>: <span class="hljs-keyword">this</span>.custom(<span class="hljs-string">"vignette"</span>,<span class="hljs-number">0.8</span>).effect({sepia: <span class="hljs-number">0.9</span>}).custom(<span class="hljs-string">"purple"</span>,<span class="hljs-number">0.6</span>); <span class="hljs-keyword">break</span>;
                
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"zephyr"</span>: <span class="hljs-keyword">this</span>.effect({brightness: <span class="hljs-number">0.1</span>, green: <span class="hljs-number">0.02</span>, red: <span class="hljs-number">0.08</span>}); <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">this</span>.effect();
            }
            
            <span class="hljs-keyword">this</span>.context.putImageData(<span class="hljs-keyword">this</span>.pixels,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>); <span class="hljs-comment">//updates new pixels to context</span>
            
             <span class="hljs-keyword">if(<span class="hljs-keyword">typeof</span> callback ) <span class="hljs-string">callback(<span class="hljs-keyword">this</span>)</span>; <span class="hljs-comment">//callback</span>
            
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        };
                    </pre>
                </div>
            </div>
        </li>
         <li id="custom">
            <div class="annotation">
              <div class="pilwrap ">
                <a class="pilcrow" href="#custom">&#182;</a>
              </div>
                <b> function custom(mode, value, callback) </b> 
                <ul>
                    <li>mode = string</li>
                    <li>value = float</li>
                    <li>Available gradients</li>
                    <ul>
                        <li>vignette</li>
                        <li>red</li>
                        <li>blue</li>
                        <li>green</li>
                        <li>orange</li>
                        <li>purple</li>
                        <li>yellow</li>
                        <li>cream</li>
                    </ul>
                </ul>
            </div>
        <div class="content">
            <div class='highlight'>
                <pre>
        Pixzelette.prototype.custom = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(mode, value, callback)</span></span>{
            
            <span class="hljs-keyword">var</span> intensity = <span class="hljs-number">1</span>;
            <span class="hljs-keyword">var</span> rad = <span class="hljs-built_in">Math</span>.sqrt((<span class="hljs-built_in">Math</span>.pow(<span class="hljs-keyword">this</span>.canvas.width,<span class="hljs-number">2</span>) + <span class="hljs-built_in">Math</span>.pow(<span class="hljs-keyword">this</span>.canvas.height,<span class="hljs-number">2</span>)) / <span class="hljs-number">2</span>);
            
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'undefined'</span>)
                intensity = value;
            
            <span class="hljs-keyword">switch</span>(mode){
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"vignette"</span>: <span class="hljs-keyword">var</span> tImage = gradient(<span class="hljs-keyword">this</span>.canvas.width/<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.canvas.height/<span class="hljs-number">2</span>, rad/<span class="hljs-number">3</span>, rad/<span class="hljs-number">1.25</span>, <span class="hljs-string">'rgba(0,0,0,0)'</span>, <span class="hljs-string">'rgba(0,0,0,1)'</span>,<span class="hljs-keyword">this</span>);
                                     <span class="hljs-keyword">this</span>.blend(tImage,<span class="hljs-string">"darken"</span>,intensity);
                                     <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"red"</span>: <span class="hljs-keyword">var</span> tImage = gradient(<span class="hljs-keyword">this</span>.canvas.width/<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.canvas.height/<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, rad/<span class="hljs-number">1.5</span>, <span class="hljs-string">'rgba(255,0,0,0.5)'</span>, <span class="hljs-string">'rgba(0,0,0,0.2)'</span>,<span class="hljs-keyword">this</span>);
                                <span class="hljs-keyword">this</span>.blend(tImage,<span class="hljs-string">"addition"</span>,intensity);
                                <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"green"</span>: <span class="hljs-keyword">var</span> tImage = gradient(<span class="hljs-keyword">this</span>.canvas.width/<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.canvas.height/<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, rad/<span class="hljs-number">1.5</span>, <span class="hljs-string">'rgba(0,255,0,0.5)'</span>, <span class="hljs-string">'rgba(0,0,0,0.2)'</span>,<span class="hljs-keyword">this</span>);
                                <span class="hljs-keyword">this</span>.blend(tImage,<span class="hljs-string">"addition"</span>,intensity);
                                <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"blue"</span>: <span class="hljs-keyword">var</span> tImage = gradient(<span class="hljs-keyword">this</span>.canvas.width/<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.canvas.height/<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, rad/<span class="hljs-number">1.5</span>, <span class="hljs-string">'rgba(0,0,255,0.5)'</span>, <span class="hljs-string">'rgba(0,0,0,0.2)'</span>,<span class="hljs-keyword">this</span>);
                                <span class="hljs-keyword">this</span>.blend(tImage,<span class="hljs-string">"addition"</span>,intensity);
                                <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"orange"</span>: <span class="hljs-keyword">var</span> tImage = gradient(<span class="hljs-keyword">this</span>.canvas.width/<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.canvas.height/<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, rad/<span class="hljs-number">1.5</span>, <span class="hljs-string">'rgba(255,165,0,0.5)'</span>, <span class="hljs-string">'rgba(0,0,0,0.2)'</span>,<span class="hljs-keyword">this</span>);
                                   <span class="hljs-keyword">this</span>.blend(tImage,<span class="hljs-string">"addition"</span>,intensity);
                                   <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"purple"</span>: <span class="hljs-keyword">var</span> tImage = gradient(<span class="hljs-keyword">this</span>.canvas.width/<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.canvas.height/<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, rad/<span class="hljs-number">1.5</span>, <span class="hljs-string">'rgba(128,0,128,0.5)'</span>, <span class="hljs-string">'rgba(0,0,0,0.2)'</span>,<span class="hljs-keyword">this</span>);
                                   <span class="hljs-keyword">this</span>.blend(tImage,<span class="hljs-string">"addition"</span>,intensity);
                                   <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"yellow"</span>: <span class="hljs-keyword">var</span> tImage = gradient(<span class="hljs-keyword">this</span>.canvas.width/<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.canvas.height/<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, rad/<span class="hljs-number">1.5</span>, <span class="hljs-string">'rgba(255,255,102,0.5)'</span>, <span class="hljs-string">'rgba(0,0,0,0.2)'</span>,<span class="hljs-keyword">this</span>);
                                   <span class="hljs-keyword">this</span>.blend(tImage,<span class="hljs-string">"addition"</span>,intensity);
                                   <span class="hljs-keyword">break</span>;
                    
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"cream"</span>: <span class="hljs-keyword">var</span> tImage = gradient(<span class="hljs-keyword">this</span>.canvas.width/<span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.canvas.height/<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, rad/<span class="hljs-number">1.5</span>, <span class="hljs-string">'rgba(255,255,204,0.5)'</span>, <span class="hljs-string">'rgba(0,0,0,0.2)'</span>,<span class="hljs-keyword">this</span>);
                                  <span class="hljs-keyword">this</span>.blend(tImage,<span class="hljs-string">"addition"</span>,intensity);
                                  <span class="hljs-keyword">break</span>;
            }
            
            <span class="hljs-keyword">this</span>.context.putImageData(<span class="hljs-keyword">this</span>.pixels,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>); <span class="hljs-comment">//updates the new pixels to context</span>
            
             <span class="hljs-keyword">if(<span class="hljs-keyword">typeof</span> callback ) <span class="hljs-string">callback(<span class="hljs-keyword">this</span>)</span>; <span class="hljs-comment">//callback</span>
            
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        }
                </pre>
            </div>
        </div>
    </li>
     <li id="getCanvas">
        <div class="annotation">
          <div class="pilwrap ">
            <a class="pilcrow" href="#getCanvas">&#182;</a>
          </div>
            <b> function getCanvas() </b> 
            <ul>
                <li>Returns a canvas element</li>
            </ul>
         </div>
        <div class="content">
            <div class='highlight'>
                <pre>
        Pixzelette.prototype.getCanvas = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canvas; <span class="hljs-comment">//returns a canvas element</span>
        };
                </pre>
            </div>
         </div>
        </li>
        <li id="getImage">
        <div class="annotation">
          <div class="pilwrap ">
            <a class="pilcrow" href="#getImage">&#182;</a>
          </div>
            <b> function getImage(type, quality) </b> 
            <ul>
                <li>type = string</li>
                <li>quality = float ( 0 to 1 )</li>
                <li>Returns a image element</li>
                <li><b>Available types</b></li>
                <ul>
                    <li>png</li>
                    <li>jpg or jpeg</li>
                    <li>webp</li>
                </ul>
            </ul>
         </div>
        <div class="content">
            <div class='highlight'>
                <pre>
        Pixzelette.prototype.getImage = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(type,quality)</span></span>{
            
                <span class="hljs-keyword">var</span> mode = <span class="hljs-string">"png"</span>;
                <span class="hljs-keyword">var</span> qty = <span class="hljs-number">1</span>;
                <span class="hljs-keyword">var</span> img = <span class="hljs-literal">null</span>;
            
                <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> type != <span class="hljs-string">'undefined'</span>)
                    mode = type;
            
                <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> quality != <span class="hljs-string">'undefined'</span>)
                    qty = quality;
            
                <span class="hljs-keyword">switch</span>(mode){
                        
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"png"</span>: img = <span class="hljs-keyword">this</span>.canvas.toDataURL(<span class="hljs-string">"image/png"</span>,qty);
                                    <span class="hljs-keyword">break</span>;
                        
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"jpg"</span>: 
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"jpeg"</span>: img = <span class="hljs-keyword">this</span>.canvas.toDataURL(<span class="hljs-string">"image/jpeg"</span>,qty);
                                     <span class="hljs-keyword">break</span>;
                        
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"webp"</span>: img = <span class="hljs-keyword">this</span>.canvas.toDataURL(<span class="hljs-string">"image/webp"</span>,qty);
                                     <span class="hljs-keyword">break</span>;
                        
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"default"</span>: img = <span class="hljs-keyword">this</span>.canvas.toDataURL();
                                     <span class="hljs-keyword">break</span>;
                }
            
                <span class="hljs-keyword">this</span>.image.src = img;
                
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.image; <span class="hljs-comment">//returns an image</span>
        };
                </pre>
            </div>
        </div>
    </li>
     <li id="getDataURL">
        <div class="annotation">
          <div class="pilwrap ">
            <a class="pilcrow" href="#getCanvas">&#182;</a>
          </div>
            <b> function getDataURL(type, qualtity) </b> 
            <ul>
                <li>type = string</li>
                <li>quality = float ( 0 to 1 )</li>
                <li>Returns base64 encoded data url</li>
                <li><b>Available types</b></li>
                <ul>
                    <li>png</li>
                    <li>jpg or jpeg</li>
                    <li>webp</li>
                </ul>
            </ul>
         </div>
        <div class="content">
            <div class='highlight'>
                <pre>
        Pixzelette.prototype.getDataURL = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(type,quality)</span></span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getImage(type,quality).src;
        };
                </pre>
            </div>
         </div>
    </li>
     <li id="getDataURL">
        <div class="annotation">
          <div class="pilwrap ">
            <a class="pilcrow" href="#getDataURL">&#182;</a>
          </div>
            <b> function getImageData() </b> 
            <ul>
                <li>Returns pixel from context for image manipulation</li>
            </ul>
         </div>
        <div class="content">
            <div class='highlight'>
                <pre>
        Pixzelette.prototype.getImageData = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.context.getImageData(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.canvas.width,<span class="hljs-keyword">this</span>.canvas.height); <span class="hljs-comment">//returns the image drawn on the canvas</span>
        };
                </pre>
            </div>
         </div>
    </li>
    <li id="RGBtoHSV">
        <div class="annotation">
          <div class="pilwrap ">
            <a class="pilcrow" href="#RGBtoHSV">&#182;</a>
          </div>
            <b> function RGBtoHSV(red, green, blue) [private] </b> 
            <ul>
                <li>Converts rgb colours to hsv.</li>
                <li>Returns an object with properties hue, saturation, value.</li>
            </ul>
         </div>
        <div class="content">
            <div class='highlight'>
                <pre> 
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RGBtoHSV</span><span class="hljs-params">(r,g,b)</span> </span>{
                <span class="hljs-keyword">var</span> h,s,v,delta;
                min = <span class="hljs-built_in">Math</span>.min( r, g, b );
                max = <span class="hljs-built_in">Math</span>.max( r, g, b );
                v = max;
                delta = max - min;
                <span class="hljs-keyword">if</span>( max != <span class="hljs-number">0</span> )
                    s = delta / max;
                <span class="hljs-keyword">else</span> {
                    s = <span class="hljs-number">0</span>;
                    h = -<span class="hljs-number">1</span>;
                <span class="hljs-keyword">return</span> {hue: h,saturation: s,value: <span class="hljs-literal">undefined</span>};
                }
                <span class="hljs-keyword">if</span>( r === max )
                    h = ( g - b ) / delta; 
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( g === max )
                    h = <span class="hljs-number">2</span> + ( b - r ) / delta;
                <span class="hljs-keyword">else</span>
                    h = <span class="hljs-number">4</span> + ( r - g ) / delta;
                h *= <span class="hljs-number">60</span>;
                <span class="hljs-keyword">if</span>( h &lt; <span class="hljs-number">0</span> )
                    h += <span class="hljs-number">360</span>;
                <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">isNaN</span>(h) )
                    h = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">return</span> {hue: h,saturation: s,value: v};
            };

                </pre>
            </div>
         </div>
    </li>
    <li id="HSVtoRGB">
        <div class="annotation">
          <div class="pilwrap ">
            <a class="pilcrow" href="#HSVtoRGB">&#182;</a>
          </div>
            <b> function HSVtoRGB(hue, saturation, value) [private] </b> 
            <ul>
                <li>Converts hsv colours to rgb.</li>
                <li>Returns an object with properties red, green, blue.</li>
            </ul>
         </div>
        <div class="content">
            <div class='highlight'>
                <pre>
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HSVtoRGB</span><span class="hljs-params">(h,s,v)</span> </span>{
                    <span class="hljs-keyword">var</span> i;
                    <span class="hljs-keyword">var</span> r,g,b;
                    <span class="hljs-keyword">if</span>(s === <span class="hljs-number">0</span> ) {
                        r = g = b = v;
                        <span class="hljs-keyword">return</span> {red: r,green: g,blue: b};
                    }
                    h /= <span class="hljs-number">60</span>;
                    i = <span class="hljs-built_in">Math</span>.floor( h );
                    f = h - i;
                    p = v * ( <span class="hljs-number">1</span> - s );
                    q = v * ( <span class="hljs-number">1</span> - s * f );
                    t = v * ( <span class="hljs-number">1</span> - s * ( <span class="hljs-number">1</span> - f ) );
                    <span class="hljs-keyword">switch</span>( i ) {
                        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                            r = v;
                            g = t;
                            b = p;
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                            r = q;
                            g = v;
                            b = p;
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                            r = p;
                            g = v;
                            b = t;
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                            r = p;
                            g = q;
                            b = v;
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                            r = t;
                            g = p;
                            b = v;
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">default</span>:
                            r = v;
                            g = p;
                            b = q;
                            <span class="hljs-keyword">break</span>;
                    }
                    <span class="hljs-keyword">return</span> {red: r,green: g,blue: b};
                }
    
                </pre>
            </div>
         </div>
    </li>
    <li id="gradient">
        <div class="annotation">
          <div class="pilwrap ">
            <a class="pilcrow" href="#gradient">&#182;</a>
          </div>
            <b> function gradient(x,y,r0,r1,c0,c1) [private] </b> 
            <ul>
                <li>Custom gradient generator</li>
                <li>Returns Image</li>
            </ul>
         </div>
        <div class="content">
            <div class='highlight'>
                <pre>
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gradient</span><span class="hljs-params">(x,y,r0,r1,c0,c1,element)</span></span>{
                
                <span class="hljs-keyword">var</span> gCanvas = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"canvas"</span>);
                gCanvas.width = element.canvas.width;
                gCanvas.height = element.canvas.height;
                
                <span class="hljs-keyword">var</span> gContext = gCanvas.getContext(<span class="hljs-string">'2d'</span>);
                
                gContext.rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, gCanvas.width, gCanvas.height);
                             
                <span class="hljs-keyword">var</span> gradient = gContext.createRadialGradient(x,y,r0,x,y,r1);
                
                gradient.addColorStop(<span class="hljs-number">0</span>, c0);
                gradient.addColorStop(<span class="hljs-number">1</span>, c1);
                
                gContext.fillStyle = gradient;
                
                gContext.fill();
                
                gImage = <span class="hljs-keyword">new</span> Image();
                gImage.src = gCanvas.toDataURL();
                
                <span class="hljs-keyword">return</span> gImage;
            }
    
                </pre>
            </div>
         </div>
    </li>
    <li id="blend_fix">
        <div class="annotation">
          <div class="pilwrap ">
            <a class="pilcrow" href="#blend_fix">&#182;</a>
          </div>
            <b> function blend_fix(source, destination , mode ,opacity) [private] </b> 
            <ul>
                <li>Fix for missing inbuild blend modes</li>
            </ul>
         </div>
        <div class="content">
            <div class='highlight'>
                <pre>
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">blend_fix</span><span class="hljs-params">(source, destination, mode, opacity)</span></span>{

                <span class="hljs-keyword">var</span> args = {
                    w: destination.canvas.width,
                    h: destination.canvas.height
                };

                source = <span class="hljs-keyword">new</span> Pixzelette(source,args);

                <span class="hljs-keyword">var</span> opaque = <span class="hljs-keyword">typeof</span> opacity !== <span class="hljs-string">'undefined'</span>? opacity: <span class="hljs-number">0</span>;

                <span class="hljs-keyword">if</span>(source == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

                <span class="hljs-keyword">if</span>(mode == <span class="hljs-string">"addition"</span>){
                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; destination.pixels.data.length; i+= <span class="hljs-number">4</span>){

                        destination.pixels.data[i] += source.pixels.data[i] * opaque;
                        destination.pixels.data[i+<span class="hljs-number">1</span>] += source.pixels.data[i+<span class="hljs-number">1</span>] * opaque;
                        destination.pixels.data[i+<span class="hljs-number">2</span>] += source.pixels.data[i+<span class="hljs-number">2</span>] * opaque;

                    }
                }

                <span class="hljs-keyword">if</span>(mode == <span class="hljs-string">"subtract"</span>){

                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; destination.pixels.data.length; i+= <span class="hljs-number">4</span>){

                        destination.pixels.data[i] -= source.pixels.data[i] * opaque;
                        destination.pixels.data[i+<span class="hljs-number">1</span>] -= source.pixels.data[i+<span class="hljs-number">1</span>] * opaque;
                        destination.pixels.data[i+<span class="hljs-number">2</span>] -= source.pixels.data[i+<span class="hljs-number">2</span>] * opaque;

                    }
                }

                <span class="hljs-keyword">if</span>(mode == <span class="hljs-string">"divide"</span>){

                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; destination.pixels.data.length; i+= <span class="hljs-number">4</span>){

                        destination.pixels.data[i] += (<span class="hljs-number">255</span> * opaque) - source.pixels.data[i];
                        destination.pixels.data[i+<span class="hljs-number">1</span>] += (<span class="hljs-number">255</span> * opaque) - source.pixels.data[i+<span class="hljs-number">1</span>];
                        destination.pixels.data[i+<span class="hljs-number">2</span>] += (<span class="hljs-number">255</span> * opaque) - source.pixels.data[i+<span class="hljs-number">2</span>];

                    }
                }

            }</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
